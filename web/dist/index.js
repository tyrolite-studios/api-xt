(()=>{"use strict";function t(t,...e){let n=[];try{throw Error("foo")}catch(t){n=t.stack.split("\n")}const o=[];let s=0;for(const t of n){const e=s;if(s++,e<=1)continue;if(2===e){o.push(t.trim());continue}if(e>6)break;const[n]=t.split("(");o.push(n.substring(6).trim())}return console.group("Debug "+o.join(" <- ")),console.log(t,...e),console.groupEnd(),t}const e=t=>null===t;function n(t){return"string"==typeof t}function o(t){return Array.isArray(t)}function s(t){return!!t&&"object"==typeof t&&!o(t)}function r(t){return"function"==typeof t}function i(t){if(!t)return[];const e=/\b(full|w-full|h-full)\b/g;return t.match(e)||[]}class d{constructor(t="",e=""){this.cls=[],this.add(t),this.overwrites=e}add(t=""){t&&this.cls.push(t)}addIf(t,e,n=""){t?this.add(e):this.add(n)}addIfProps(t){for(const[e,n]of Object.entries(t))r(n)&&(n=n()),n&&this.add(e)}getDeletesAndAdds(){const t=this.overwrites.split(" "),e=[],n=[];for(const o of t)o.startsWith("not_")?e.push(o.substring(4)):n.push(o);return{adds:n,deletes:e}}get value(){const t=this.cls.join(" ");if(!this.overwrites)return t;const{adds:e,deletes:n}=this.getDeletesAndAdds(),o=undefined;return[...t.split(" ").filter((t=>!n.includes(t))),...e].join(" ")}}function c(t){return"undefined"!=typeof DOMException&&t instanceof DOMException&&("QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)}const a=(t,e="")=>{let o=!1;const s=new Set,r=e.length;for(let n=0;n<t.length;n++){const o=t.key(n);o.startsWith(e)&&s.add(o.substring(r))}const i={get:(n,o)=>{const s=t.getItem(e+n);return null===s?o:s},getJson:(t,e)=>i.getByType("json",t,e),getByType:(t,e,n)=>{const o=i.get(e+"_"+t);if(void 0===o)return n;switch(t){case"json":return JSON.parse(o)}throw Error(`Unsupported type "${t}" for decoding given!`)},has:t=>s.has(t),hasJson:t=>i.hasByType(t,"json"),hasByType:(t,e)=>i.has(t+"_"+e),set:(r,i)=>{if(!n(i))throw Error(`value for id "${r}" to a string`);try{t.setItem(e+r,i)}catch(t){return c(t)&&(o=!0),!1}return s.add(r),!0},setJson:(t,e)=>i.setByType("json",t,e),setByType:(t,e,n)=>{if(void 0===n)throw Error(`Cannot store undefined value for id "${e}"`);const o=i.encode(t,n);return i.set(e+"_"+t,o)},delete:n=>!!s.has(n)&&(t.removeItem(e+n),s.delete(n),o=!1,!0),deleteJson:t=>i.deleteByType("json",t),deleteByType:(t,e)=>i.delete(e+"_"+t),keys:()=>[...s],isAvailable:()=>{try{const e="__storage_test__";return t.setItem(e,"1"),t.removeItem(e),!0}catch(e){return"undefined"!=typeof DOMException&&e instanceof DOMException&&!c(e)&&(22===e.code||1014===e.code)&&t&&0!==t.length}},isFull:()=>o,size:()=>s.size,encode:(t,e)=>{switch(t){case"json":return JSON.stringify(e)}throw Error(`Unsupported type "${t}" for encoding given!`)}};return i},u=new URL(window.location.href);u.search="";const l=u.toString();let p=null;function f({config:t}){null===p&&(p=a(localStorage,"tls.apixt."));const e=t=>{if(window.runApiExtender)window.runApiExtender(t);else{const t=document.createElement("script");t.src=`${l}/index.js`,document.head.appendChild(t)}},n=()=>{p.deleteJson("jwt"),document.cookie="tls.apixt.jwt=; Max-Age=-9999; path=/"},o=t=>{p.setJson("jwt",t),document.cookie=`tls.apixt.jwt=${t}; path=/`},s=()=>{if(!window.loginResponse)return!1;const{jwt:t,config:n}=window.loginResponse;return o(t),e(n),!0},r=()=>{window.clearJwt=n;const t=p.getJson("jwt");if(window.loginResponse)return t===window.loginResponse.jwt?s():n(),void 0;!window.runApiExtender&&t&&fetch(l+"/refresh",{headers:{Authorization:`Bearer ${t}`}}).then((t=>{if(!t.ok||200!==t.status)throw Error("Could not authenticate");return t.json()})).then((({jwt:t,config:n})=>{o(t),e(n)})).catch(n)},i=function(t){if(t.preventDefault(),s())return;const r=new FormData(document.getElementById("login-form")),i=new URLSearchParams(r);fetch(l,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:i}).then((t=>{if(401===t.status)throw document.getElementById("username").focus(),Error("Could not authenticate");return t.json()})).then((({config:t,jwt:n})=>{o(n),e(t)})).catch(n)};document.body.innerHTML='<div class="full bg-app-bg text-app-text"><div class="grid place-content-center h-full"><form id="login-form" class="text-center"><div class="stack-v gap-2 border-header-border border shadow-md"><div class="bg-header-bg text-header-text px-2">Login</div><div class="stack-v gap-2 px-3"><div class="stack-h gap-2"><div class="text-xs">Username:</div><input id="username" name="username" type="text" autocomplete="username" class="px-2 bg-input-bg text-input-text border-input-border" /></div><div class="stack-h gap-2"><div class="text-xs">Password:</div><input type="password" name="password" autocomplete="current-password" class="px-2 bg-input-bg text-input-text border-input-border" /></div><div class="pb-2"><button type="submit" class="bg-button-bg text-button-text border border-button-border text-xs px-2">Submit</button></div></div></div></form></div></div>',document.getElementById("login-form").addEventListener("submit",i),requestAnimationFrame((()=>r()))}const h=t=>{const e=()=>{f({config:t})};"loading"===document.readyState?addEventListener("DOMContentLoaded",e,{once:!0}):e()};window.runLoginApp=h,h({baseUrl:"http://localhost:8082"})})();